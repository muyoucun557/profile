# 网关和网关限流

在最原始的情况下，如果服务直接对客户端提供服务，那会出现哪些问题？

1. 【细粒度服务API】要求客户端必须发起多次请求才能得到所需的数据，性能差体验不好
2. 客户端了解且分别依赖于每一个服务的API，耦合性强（如果是网关的话，对于一个功能而言，客户端只需要知道一个API，这样耦合性低），不利于后端服务与API升级。
3. 后端服务提供的对外通信机制可能客户端不便接入

使用API Gateway能够解决上述问题。
API Gateway是一个服务，作为访问系统的入口点。它具备下面几个功能
1. 路由转发，将客户端的请求转发到对应的服务上
2. API组合，将细粒度的API聚合成一个API
3. 协议转换，如服务间通信使用的是gRPC，客户端使用的是http，API Gateway能作为通信桥梁，实现协议转换
4. 实现边缘功能，例如身份验证、日志采集、速度限制（限流）

API GateWay的好处是能解决上面的三个问题，同时也会带来一些弊端。
1. 网络请求增加了亿条，增加了消耗
2. 增加一层，增加了系统的复杂度

## GoKu API Gateway
中文名称叫悟空网关，是一个使用Go开发的网关服务。<https://github.com/eolinker/goku_lite/blob/master/README_CN.md>
它实现了HTTP API转发、多租户管理、API访问权限控制等目的。拥有强大的自定义插件系统进行扩展，并提供友好的图形化配置界面。

官网提供了部署指南<https://op-help.eolink.com/#/tutorial/?groupID=c-376&productID=19>

